apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

android {
    compileSdkVersion 27

    defaultConfig {
        applicationId 'com.janhafner.myskatemap.apps.trackrecorder'
        minSdkVersion 23
        targetSdkVersion 27
        versionCode 1
        versionName "1.0"
        resConfigs "en", "de"
    }
    buildTypes {
        debug {
            minifyEnabled false
            shrinkResources false
            ext.enableCrashlytics = false
            ext.alwaysUpdateBuildId = false

            buildConfigField 'boolean', 'DEBUG_ENABLE_DEBUGACTIVITY', 'true'
            buildConfigField 'boolean', 'ENABLE_STILLDETECTION', 'true'

            buildConfigField 'boolean', 'MAP_FORCE_OPENSTREETMAP_MAPCONTROL', 'false'
            buildConfigField 'float', 'MAP_INITIAL_ZOOM', '1.0f'
            buildConfigField 'double', 'MAP_INITIAL_LATITUDE', '50.8333'
            buildConfigField 'double', 'MAP_INITIAL_LONGITUDE', '12.9167'

            buildConfigField 'boolean', 'TRACKING_USE_FAKELIVELOCATIONTRACKINGSERVICE', 'true'
            buildConfigField 'int', 'TRACKING_STILLDETECTOR_DETECTION_INTERVAL_IN_MILLISECONDS', '2000'
            buildConfigField 'boolean', 'TRACKING_ENABLE_LIVELOCATIONTRACKING', 'true'

            buildConfigField 'float', 'SIMULATED_LOCATION_PROVIDER_INITIAL_BEARING', '1.0f'
            buildConfigField 'int', 'SIMULATED_LOCATION_PROVIDER_INTERVAL_IN_MILLISECONDS', '500'
            buildConfigField 'int', 'SIMULATED_LOCATION_PROVIDER_DELAY_IN_MILLISECONDS', '0'
            buildConfigField 'float', 'SIMULATED_LOCATION_PROVIDER_BEARING_STEPPING', '0.0001f'
            buildConfigField 'double', 'SIMULATED_LOCATION_PROVIDER_LONGITUDE_STEPPING', '0.001'
            buildConfigField 'double', 'SIMULATED_LOCATION_PROVIDER_LATITUDE_STEPPING', '0.001'
            buildConfigField 'boolean', 'SIMULATED_LOCATION_PROVIDER_FORCE_NEED_OF_LOCATION_SERVICES', 'true'

            buildConfigField 'float', 'FUSED_LOCATION_PROVIDER_SMALLEST_DISPLACEMENT_METERS', '5.0f'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_FASTEST_INTERVAL_IN_MILLISECONDS', '1000'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_INTERVAL_IN_MILLISECONDS', '2500'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_MAX_WAIT_TIME_IN_MILLISECONDS', '5000'
        }
        release {
            minifyEnabled true
            shrinkResources true

            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'

            buildConfigField 'boolean', 'DEBUG_ENABLE_DEBUGACTIVITY', 'false'
            buildConfigField 'boolean', 'ENABLE_STILLDETECTION', 'true'

            buildConfigField 'boolean', 'MAP_FORCE_OPENSTREETMAP_MAPCONTROL', 'false'
            buildConfigField 'float', 'MAP_INITIAL_ZOOM', '1.0f'
            buildConfigField 'double', 'MAP_INITIAL_LATITUDE', '50.8333'
            buildConfigField 'double', 'MAP_INITIAL_LONGITUDE', '12.9167'

            buildConfigField 'boolean', 'TRACKING_USE_FAKELIVELOCATIONTRACKINGSERVICE', 'true'
            buildConfigField 'int', 'TRACKING_STILLDETECTOR_DETECTION_INTERVAL_IN_MILLISECONDS', '2000'
            buildConfigField 'boolean', 'TRACKING_ENABLE_LIVELOCATIONTRACKING', 'true'

            buildConfigField 'float', 'SIMULATED_LOCATION_PROVIDER_INITIAL_BEARING', '1.0f'
            buildConfigField 'int', 'SIMULATED_LOCATION_PROVIDER_INTERVAL_IN_MILLISECONDS', '500'
            buildConfigField 'int', 'SIMULATED_LOCATION_PROVIDER_DELAY_IN_MILLISECONDS', '0'
            buildConfigField 'float', 'SIMULATED_LOCATION_PROVIDER_BEARING_STEPPING', '0.0001f'
            buildConfigField 'double', 'SIMULATED_LOCATION_PROVIDER_LONGITUDE_STEPPING', '0.001'
            buildConfigField 'double', 'SIMULATED_LOCATION_PROVIDER_LATITUDE_STEPPING', '0.001'
            buildConfigField 'boolean', 'SIMULATED_LOCATION_PROVIDER_FORCE_NEED_OF_LOCATION_SERVICES', 'true'

            buildConfigField 'float', 'FUSED_LOCATION_PROVIDER_SMALLEST_DISPLACEMENT_METERS', '5.0f'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_FASTEST_INTERVAL_IN_MILLISECONDS', '1000'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_INTERVAL_IN_MILLISECONDS', '2500'
            buildConfigField 'int', 'FUSED_LOCATION_PROVIDER_MAX_WAIT_TIME_IN_MILLISECONDS', '5000'
        }
    }
    buildToolsVersion '27.0.3'
}

dependencies {
    implementation "com.jakewharton.rxbinding2:rxbinding-kotlin:$rxandroid_version"
    implementation "com.jakewharton.rxbinding2:rxbinding-support-v4-kotlin:$rxandroid_version"
    implementation "com.jakewharton.rxbinding2:rxbinding-appcompat-v7-kotlin:$rxandroid_version"
    implementation "io.reactivex.rxjava2:rxjava:2.2.2"
    implementation "io.reactivex.rxjava2:rxandroid:2.1.0"

    implementation "net.danlew:android.joda:2.9.9.4"

    implementation "com.karumi:dexter:5.0.0"

    implementation "com.squareup.okhttp3:okhttp:3.11.0"
    implementation "com.squareup.moshi:moshi:1.6.0"
    implementation "com.squareup.moshi:moshi-kotlin:1.6.0"

    // Updating to v12.0.0 breaks maps on emulator!
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    //noinspection GradleCompatible

    implementation "com.google.android.gms:play-services-location:$playservices_version"
    implementation "com.google.android.gms:play-services-maps:$playservices_version"
    implementation "com.android.support:support-compat:$supportlibrary_version"
    implementation "com.android.support:support-core-ui:$supportlibrary_version"
    implementation "com.android.support:support-fragment:$supportlibrary_version"
    implementation "com.android.support.constraint:constraint-layout:1.1.3"
    implementation "com.android.support:appcompat-v7:$supportlibrary_version"
    implementation "com.android.support:cardview-v7:$supportlibrary_version"
    implementation "com.android.support:gridlayout-v7:$supportlibrary_version"
    implementation "com.android.support:recyclerview-v7:$supportlibrary_version"
    implementation "com.android.support:preference-v7:$supportlibrary_version"
    implementation "com.android.support:design:$supportlibrary_version"
    implementation "com.android.support:support-v13:$supportlibrary_version"
    implementation "com.android.support:preference-v14:$supportlibrary_version"

    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"

    implementation "com.google.dagger:dagger:$dagger_version"
    implementation "com.google.dagger:dagger-android:$dagger_version"
    implementation "com.google.dagger:dagger-android-support:$dagger_version"
    kapt "com.google.dagger:dagger-android-processor:$dagger_version"
    kapt "com.google.dagger:dagger-compiler:$dagger_version"

    implementation "org.osmdroid:osmdroid-android:6.0.2"

    implementation "com.couchbase.lite:couchbase-lite-android:2.0.2"

    implementation project(':app.common')
    implementation project(':app.conversion')
    implementation project(':app.stilldetection')
    implementation project(':app.export')
    implementation project(':app.settings')
    implementation project(':app.services.couchdb')
    implementation project(':app.services')
}